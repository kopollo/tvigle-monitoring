# Описание 
tvigle-monitoring - это система мониторинга для сбора и анализа качества воспроизведения в реальном времени

Сервис общается с клиентом по http и поднимает в докер окружении связку Grafana + Prometheus + ClientApi

Для работа достаточно поднять контейнер с tvigle-monitoring рядом с вашей системой и отправлять логи на адрес /logs. 

Это всё!

# Работа с приложением
### Требования
- `Docker`
- `docker-compose`

### Запуск
Перейдите в директорию со скаченным репозиотрием, и запустите:
```commandline
docker-compose build
docker-compose up --force-recreate
```
После этого будет запущенно 3 docker-контейнера:
- контейнер с клиентским бекендом (`http://localhost:8000/docs`);
- контейнер с `Premetheus`, у которого настроен сбор метрик (`http://localhost:9090`);
- контейнер с `Grafana`, которая использует Prometheus в качестве источника данных (`http://localhost:3333`).

# Работа с дашбордом
Перейдите по адресу `http://localhost:3333/dashboards` и импортируйте шаблон Grafana (можно скачать из корневой директории)

Дашборд будет выглядеть примерно так:
![image](https://github.com/user-attachments/assets/11ebe055-24da-488d-85b4-31e848083d47)

## Какие метрики мы считаем
- Средняя задержка старта видео по регионам за последнюю минуту
- Общее количество событий старта воспроизведения по регионам и типам устройств
- Сравнение частоты ребуферингов между различными типами устройств
- Средняя продолжительность ребуферинга по регионам
- Среднее время отклика CDN на пользователя по регионам
